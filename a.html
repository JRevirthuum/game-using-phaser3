<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset='utf-8'>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.51.0/dist/phaser-arcade-physics.min.js"></script>
</head>

<body>

  <script>
    // 환경 구성
    var config = {
      type: Phaser.AUTO,
      width: 800,
      height: 600,
      physics: {
        default: 'arcade',
        arcade: {
          gravity: {
            y: 200
          }
        }
      },
      scene: {
        preload: preload,
        create: create
      }
    };

    var game = new Phaser.Game(config);

    // 리소스 로드
    function preload() {
      this.load.setBaseURL('https://labs.phaser.io');

      this.load.image('sky', 'assets/skies/space.jpg');
      this.load.image('logo', 'assets/sprites/mushroom16x16.png');
      this.load.image('green', 'assets/particles/green.png');
      // 구글 웹 폰트 로드
      this.load.script('webfont', 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js');
    }

    function create() {
      // 배경은 object가 아니기 때문에 physics 선언이 없음.
      this.add.image(400, 300, 'sky');
      var particles = this.add.particles('green');
      var emitter = particles.createEmitter({
        speed: 100,
        scale: { start: 0.5, end: 0.1 },
        blendMode: 'ADD'
      });

      // 텍스트 삽입
      this.add.text(100, 100, 'BeaverGames');

      // 텍스트 서식 object 형식
      this.add.text(100, 150, 'ObjectText 비버 Noto Sans', {
        fontFamily: 'Noto Sans KR',
        fontSize: 20,
        color: '#ffcc00'
      });

      // 텍스트 서식을 채인형태로
      this.add.text(100, 200, 'Oneplat.co').setFontFamily('Hanna').setFontSize(30).setColor('#ff00ff');

      var add = this.add;
      WebFont.load({
        google: {
          families: ['Noto Sans KR', 'Hanna']
        },
        active: function () {
          add.text(450, 100, '구글 노토 산스입니다', { fontFamily: 'Noto Sans KR', fontSize: 25, color: '#ff0000' }).setShadow(2, 2, '#333333', 2, false, true);
          
          add.text(450, 200, '배민 한나체', { fontFamily: 'Hanna', fontSize: 25, color: '#fff' }).setShadow(2, 2, '#333333', 2, false, true);
        }
      });

      var logo = this.physics.add.image(400, 300, 'logo').setScale(4);
      logo.setVelocity(100, 200); // 속도 가로축 100, 세로축 200
      logo.setBounce(1, 1); // 탄성의 양 = 수평 바운스, 수직 바운스 (0~1)
      logo.setCollideWorldBounds(true); // 충돌

      emitter.startFollow(logo);

    }
  </script>

</body>

</html>